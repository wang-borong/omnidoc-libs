\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{workart}[2023/09/11 v0.3 a work article package]

\RequirePackage{utils}

\RequirePackage{caption}

\RequirePackage{fancyhdr}
\pagestyle{fancy}
% \fancyhf{}
% \setlength{\headheight}{12.8pt}
\renewcommand{\headrule}{}
\fancyhead[C]{
  \@title
}
%\fancyhead[R]{
%  \includegraphics[height=2.5mm]{}
%}
%\fancyfoot[C]{}
\fancyfoot[C]{\small\thepage}

\renewcommand{\lstlistingname}{代码}
\AtBeginDocument{
  \renewcommand{\thetable}{\thesection{}-\arabic{table}}
  \renewcommand{\thefigure}{\thesection{}-\arabic{figure}}
  \renewcommand{\thelstlisting}{\thesection{}-\arabic{lstlisting}}
  \counterwithin*{figure}{section}
  \counterwithin*{table}{section}
  \counterwithin*{lstlisting}{section}
}

% 设置ctex宏指定的章节格式
\ctexset{
  % 一级标题：宋体，四号
  % \raggedright表示左对齐，\raggedleft表示右对齐
  section = {
    name = {,.},
    format+ = \zihao{4} \bfseries \rmfamily \raggedright
  },
  % 二级标题：宋体，小四
  subsection = {
    name = {,.},
    format += \zihao{-4} \bfseries \rmfamily \raggedright
  },
  % 三级标题：宋体，五号
  % 四级标题：宋体，五号
  % 五级标题：宋体，五号
  subsubsection = {
    name = {,.},
    format += \zihao{5} \bfseries \rmfamily \raggedright
  },
  % paragraph用作标题，目前看来是正常的（需要传入sub4section给ctexart宏）
  paragraph = {
    name = {,.},
    format += \zihao{5} \bfseries \rmfamily \raggedright
  },
  subparagraph = {
    name = {,.},
    format += \zihao{5} \bfseries \rmfamily \raggedright
  }
}

% 设置verbatim字号为5号
\renewcommand\verbatim@font{\zihao{5}}

% copied from elegantbook.cls
\RequirePackage{xcolor}
% blue
\definecolor{mynote-basis-color}{RGB}{60,113,183}
\definecolor{mynote-main-color}{RGB}{0,166,82}%
\definecolor{mynote-second-color}{RGB}{255,134,24}%
\definecolor{mynote-third-color}{RGB}{0,174,247}%
% black
% \definecolor{mynote-basis-color}{RGB}{0,0,0}
% \definecolor{mynote-main-color}{RGB}{0,0,0}%
% \definecolor{mynote-second-color}{RGB}{0,0,0}%
% \definecolor{mynote-third-color}{RGB}{0,0,0}%
\definecolor{winered}{rgb}{0.5,0,0}
\definecolor{bule}{RGB}{18,29,57}
% copied from eisvogel
\definecolor{caption-color}{HTML}{777777}
\definecolor{default-linkcolor}{HTML}{A50000}
\definecolor{default-filecolor}{HTML}{A50000}
\definecolor{default-citecolor}{HTML}{4077C0}
\definecolor{default-urlcolor}{HTML}{4077C0}

\RequirePackage{bookmark}
\bookmarksetup{
  numbered,
  color=mynote-basis-color,
}

% 设置caption字体大小为小5
% \RequirePackage[labelfont={bf,color=caption-color}]{caption} 
\DeclareCaptionFont{9pt}{\zihao{-5}}
\captionsetup
{
  font={9pt},
  labelsep=space
}

\renewcommand{\lstlistingname}{代码}
\AtBeginDocument{
  \renewcommand{\thelstlisting}{\thesection{}-\arabic{lstlisting}}
}

\geometry{
  left=3.17cm,
  right=3.17cm,
  top=2.54cm,
  bottom=2.54cm,
  headheight=20pt,
}

% \RequirePackage{enumerate}
% \RequirePackage[shortlabels,inline]{enumitem}
% \setlist{nolistsep}
%
% \newcommand*{\eitemi}{\tikz \draw [baseline, ball color=mynote-basis-color,draw=none] circle (2pt);}
% \newcommand*{\eitemii}{\tikz \draw [baseline, fill=mynote-basis-color,draw=none,circular drop shadow] circle (2pt);}
% \newcommand*{\eitemiii}{\tikz \draw [baseline, fill=mynote-basis-color,draw=none] circle (2pt);}
% \setlist[enumerate,1]{label=\color{mynote-basis-color}\arabic*.}
% \setlist[enumerate,2]{label=\color{mynote-basis-color}(\alph*).}
% \setlist[enumerate,3]{label=\color{mynote-basis-color}\Roman*.}
% \setlist[enumerate,4]{label=\color{mynote-basis-color}\Alph*.}
% \setlist[itemize,1]{label={\eitemi}}
% \setlist[itemize,2]{label={\eitemii}}
% \setlist[itemize,3]{label={\eitemiii}}

% \RequirePackage{fancyhdr}
% \fancyhf{}
%
% \fancyfoot[c]{\color{mynote-basis-color}\small\thepage}
% \fancyhead[R]{\color{mynote-basis-color}\rightmark}
%
% \renewcommand{\headrule}{\color{mynote-basis-color}\hrule width\textwidth}
% \pagestyle{fancy}
% \renewcommand{\headrulewidth}{1pt}
% \fancypagestyle{plain}{\renewcommand{\headrulewidth}{0pt}\fancyhf{}\renewcommand{\headrule}{}}
% \renewcommand{\sectionmark}[1]{\markright{\thesection\, #1}{}}
% \renewcommand{\subsectionmark}[1]{\markright{\thesubsection\, #1}{}}

\hypersetup{
  breaklinks,
  unicode,
  linktoc=all,
  bookmarksnumbered=true,
  bookmarksopen=true,
  pdfkeywords={Wangborong's work note},
  colorlinks,
  linkcolor=default-linkcolor,
  citecolor=default-citecolor,
  urlcolor=default-urlcolor,
  filecolor=default-filecolor,
  plainpages=false,
  pdfstartview=FitH,
  pdfborder={0 0 0},
  linktocpage
}

\preto\maketitle{\clearpage\pagestyle{plain}}
\appto\maketitle{}

\preto\tableofcontents{
  \hypersetup{linktoc=all, linkcolor=black}
}
\appto\tableofcontents{
  \clearpage
  \hypersetup{linkcolor=default-linkcolor}
}

\RequirePackage[many]{tcolorbox}

\endinput
